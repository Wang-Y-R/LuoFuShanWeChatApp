<view class="container">
  <view class="tabs">
    <block wx:for="{{tabs}}" wx:key="index">
      <view data-index="{{index}}" bindtap="onTab" class="tab-item {{activeTab==index?'active':''}}">{{item}}</view>
    </block>
  </view>

  <view class="list">
    <block wx:for="{{list}}" wx:key="userId">
      <view class="rank-item" data-userid="{{item.userId}}" bindtap="onUserTap">
        <view class="rank-badge {{item.rank<=3?'top':''}}">#{{item.rank}}</view>
        <image class="avatar" src="{{item.avatarUrl || '/assets/default-avatar.png'}}" />
        <view class="info">
          <view class="name">{{item.nickname}}</view>
          <view class="meta">打卡 {{item.checkinCount}}</view>
        </view>
        <view class="score">{{item.checkinCount}}</view>
      </view>
    </block>

    <view wx:if="{{!list || list.length===0}}" class="empty">暂无排行数据</view>
    <view wx:if="{{loading}}" class="loading">加载中...</view>
  </view>

  <!-- 底部固定：当前用户排行 -->
  <view class="my-rank" wx:if="{{myRank}}">
    <view class="my-info">
      <view class="my-label">我的排名</view>
      <view class="my-value">{{myRank.rank ? ('#' + myRank.rank) : '未上榜'}}</view>
    </view>
    <view class="my-count">本期打卡 {{myRank.checkinCount || 0}}</view>
  </view>
</view>
