<view class="container">
  <view class="section">
    <view class="section-header">
      <text>动态</text>
      <view class="select-wrap">
        <view class="select" bindtap="toggleSort">
          <text>排序 {{sorts[activeSort]}}</text>
          <text class="chevron">▾</text>
        </view>
        <view wx:if="{{sortOpen}}" class="select-menu">
          <block wx:for="{{sorts}}" wx:key="index">
            <view class="select-item" data-index="{{index}}" bindtap="selectSort">{{item}}</view>
          </block>
        </view>
      </view>
    </view>
  </view>
  <block wx:for="{{list}}" wx:key="id">
    <view class="card" style="margin-top:16rpx;">
      <view class="card-body">
        <view style="display:flex;align-items:center;gap:16rpx;">
          <image src="{{item.avatar}}" style="width:64rpx;height:64rpx;border-radius:50%" />
          <view style="flex:1;">
            <view>{{item.user}}</view>
            <view style="color:#666;">{{item.time}} · 位置：{{item.place}}{{item.distance?(' · '+item.distance+'km'):''}}</view>
          </view>
        </view>
        <view style="margin-top:12rpx;">{{item.content}}</view>
        <view style="display:flex;gap:8rpx;margin-top:12rpx;">
          <image wx:for="{{item.photos}}" wx:key="index" src="{{item}}" style="width:32%;height:200rpx;border-radius:12rpx" mode="aspectFill" />
        </view>
        <view style="display:flex;gap:12rpx;margin-top:12rpx;">
          <button class="btn-secondary" size="mini" data-id="{{item.id}}" bindtap="onLike">点赞 {{item.likes}}</button>
          <button class="btn-secondary" size="mini" data-id="{{item.id}}" bindtap="onComment">评论 {{item.comments}}</button>
        </view>
      </view>
    </view>
  </block>
</view>
